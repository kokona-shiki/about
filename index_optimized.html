<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <title data-i18n="title">Personal Page of Kokona</title>
    <meta name="description" content="This is the homepage of Kokona_Shiki">
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    
    <!-- 关键CSS内联 - 立即显示文字内容 -->
    <style>
        /* 立即应用的字体和布局样式 */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #000;
            color: #f9f002;
            line-height: 1.6;
        }
        
        header {
            background-color: black;
            height: 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        
        nav {
            display: flex;
            align-items: center;
            font-size: 1.3rem;
        }
        
        .header_a {
            color: #f9f002; 
            text-decoration: none;
            margin-left: 40px;
        }
        
        .header_a:hover {
            color: #5aedf4;
        }
        
        .header_a01 {
            color: #f9f002; 
            text-decoration: none;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            padding: 5px 10px;
            transition: color 0.3s ease;
        }
        
        .header_a01:hover {
            color: #5aedf4;
        }
        
        .header_a01.active {
            color: #5aedf4;
        }
        
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        section {
            margin-bottom: 40px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        
        h3 {
            font-size: 1.8rem;
            margin-top: 20px;
        }
        
        .cyberpunk {
            border: 2px solid #f9f002;
            padding: 20px;
            margin: 20px 0;
        }
        
        .black {
            background-color: #111;
        }
        
        img {
            max-width: 100%;
            height: auto;
        }
        
        #hitokoto {
            text-align: center;
            font-size: 1.2rem;
            margin: 30px 0;
        }
        
        .hidden {
            display: none;
        }
    </style>
    
    <!-- 字体预加载 - 最高优先级 -->
    <link rel="preload" href="./fonts/AdventPro-Regular.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="./fonts/AdventPro-Bold.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="./fonts/VT323-Regular.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- CSS异步加载 -->
    <link rel="preload" href="./css/fonts-preload.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="./css/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="./css/cyberpunk-2077.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="./css/fonts-preload.css" rel="stylesheet"></noscript>
    <noscript><link href="./css/style.css" rel="stylesheet"></noscript>
    <noscript><link href="./css/cyberpunk-2077.css" rel="stylesheet"></noscript>
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "s29yk5g68m");
    </script>
    </head>
    <body>
        <!--上边栏-->
        <header>
            <nav style="font-size: 1.3rem; text-align: left; display: flex; align-items: center;">
                <a class="header_a" href="https://kokona.top" style="margin-left: 20px;" target="_blank" data-i18n="header.blog">Blog</a>
                <a class="header_a" href="#" data-i18n="header.radio" onclick="openRadioModal()">What Is Amateur Radio</a>
            </nav>
            <nav style="font-size: 1rem; text-align: center; display: flex; align-items: center;">
                <button class="header_a01" onclick="setLanguage('zh')" data-lang-btn="zh">中文</button>
                <span style="color: #f9f002; margin: 0 10px;">|</span>
                <button class="header_a01" onclick="setLanguage('en')" data-lang-btn="en">English</button>
            </nav>
        </header>

        <main>
            <!-- 关于我 -->
            <section class="cyberpunk">
                <h1 data-i18n="about.title">About Me</h1>
                <p style="margin-top: 30px;" data-i18n="about.content">
                    Hi, I'm Cade <br/>I enjoy programming and <a href="#" onclick="openRadioModal()">amateur radio</a> in my spare time. My callsign is <a href="https://www.qrz.com/db/BG0FFH">BG0FFH</a>. <br/>Curious about new technologies, and always open to learning.
                </p>
            </section>

            <!-- 业余无线电 -->
            <section class="cyberpunk black">
                <h1 data-i18n="radio.title">Amateur Radio</h1>
                
                <h3 style="margin-top: 15px;" data-i18n="radio.about">About</h3>
                <ol id="radio-timeline" style="margin-top: 20px; margin-left: 25px;">
                    <!-- 时间线内容将通过JavaScript动态生成 -->
                </ol>

                <!-- 我的设备 -->
                <h3 style="margin-top: 20px;" data-i18n="radio.equipment">My equipments</h3>
                <div class="equipment-grid">
                    <div class="equipment-item">
                        <h4>ICOM IC-705</h4>
                        <div style="display: flex; justify-content: center;">
                            <img style="width: 45%; height: auto;" src="./img/ic705.jpg" alt="ICOM IC-705" loading="lazy">
                        </div>
                    </div>
                    <div class="equipment-item">
                        <h4>Quansheng UV-K6</h4>
                        <div style="display: flex; justify-content: center;">
                            <img style="width: 45%; height: auto;" src="./img/uvk6.png" alt="Quansheng UV-K6" loading="lazy">
                        </div>
                    </div>
                    <div class="equipment-item">
                        <h4>Yaesu FT-70DR</h4>
                        <div style="display: flex; justify-content: center;">
                            <img style="width: 45%; height: auto;" src="./img/ft70dr.jpg" alt="Yaesu FT-70DR" loading="lazy">
                        </div>
                    </div>
                    <div class="equipment-item">
                        <h4>MMDVM hotspot & CWO</h4>
                        <div style="display: flex; justify-content: center;">
                            <img style="width: 45%; height: auto;" src="./img/mmdvm_cwo.png" alt="MMDVM hotspot & CWO" loading="lazy">
                        </div>
                    </div>
                </div>

                <!-- 活动记录 -->
                <h3 data-i18n="radio.activities">Activities</h3>
                <h2 style="margin-left: 20px; margin-top: 10px;" data-i18n="radio.contests">Contests</h2>
                <h3 style="margin-left: 20px; margin-top: 10px;">CQWW</h3>
                <h4 style="margin-left: 20px; margin-top: 10px;" data-i18n="radio.myself">Myself</h4>
                
                <div class="activity-images">
                    <div style="display: flex; justify-content: center;">
                        <img style="width: 25%; height: auto;" src="./img/myself.jpg" alt="本人" loading="lazy">
                    </div>
                    <div style="display: flex; justify-content: center; margin-bottom: 20px;">
                        <img style="width: 75%; height: auto;" src="./img/by0ac_1.jpg" alt="活动照片1" loading="lazy">
                    </div>
                    <div style="display: flex; justify-content: center; margin-bottom: 20px;">
                        <img style="width: 75%; height: auto;" src="./img/by0ac_2.jpg" alt="活动照片2" loading="lazy">
                    </div>
                    <div style="display: flex; justify-content: center;">
                        <img style="width: 75%; height: auto;" src="./img/by0ac_3.jpg" alt="活动照片3" loading="lazy">
                    </div>
                </div>
            </section>

            <!-- 每日一言 -->
            <section>
                <h4 style="text-align: center; margin-top: 20px;" data-i18n="quote.title">Everyday quote</h4>
                <p id="hitokoto" style="color: #f9f002; margin-top: 20px; text-align: center;">
                    <span id="hitokoto_text" data-i18n="quote.loading">:D Fetching...</span>
                </p>
            </section>
        </main>

        <!-- 业余无线电弹窗 -->
        <div id="radioModal" class="modal hidden">
            <div class="modal-content">
                <button class="modal-close" onclick="closeRadioModal()">×</button>
                <div id="modalContent">
                    <!-- 内容将动态生成 -->
                </div>
            </div>
        </div>

        <!-- 延迟加载的样式 -->
        <style>
            .equipment-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
                margin-top: 20px;
            }

            .equipment-item {
                border: 1px solid #f9f002;
                padding: 15px;
                border-radius: 5px;
            }

            .modal {
                position: fixed;
                z-index: 1000;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.9);
                overflow-y: auto;
            }

            .modal-content {
                position: relative;
                background-color: #000;
                margin: 20px auto;
                padding: 20px;
                border: 2px solid #f9f002;
                width: 90%;
                max-width: 800px;
                border-radius: 5px;
            }

            .modal-close {
                position: absolute;
                top: 10px;
                right: 15px;
                color: #f9f002;
                font-size: 28px;
                font-weight: bold;
                cursor: pointer;
                background: none;
                border: none;
            }

            .modal-close:hover {
                color: #5aedf4;
            }

            @media (max-width: 768px) {
                .equipment-grid {
                    grid-template-columns: 1fr;
                }
                
                .modal-content {
                    margin: 10px;
                    width: 95%;
                }
            }
        </style>

        <!-- 字体加载和i18n -->
        <script>
        // 字体加载优化
        if ('fonts' in document) {
            Promise.all([
                document.fonts.load('400 1em Advent Pro'),
                document.fonts.load('700 1em Advent Pro'),
                document.fonts.load('400 1em VT323')
            ]).then(function() {
                document.body.classList.add('fonts-loaded');
                console.log('字体加载完成');
            }).catch(function(error) {
                console.log('字体加载失败，使用系统字体');
                document.body.classList.add('fonts-loaded');
            });
        } else {
            document.body.classList.add('fonts-loaded');
        }
        </script>
        
        <!-- 加载i18n配置 -->
        <script src="./js/i18n.js"></script>
        <script>
            // 多语言管理
            class I18nManager {
                constructor() {
                    this.currentLang = localStorage.getItem('language') || i18nConfig.defaultLanguage;
                }

                setLanguage(lang) {
                    this.currentLang = lang;
                    localStorage.setItem('language', lang);
                    this.updateLanguage();
                    this.updateLanguageButtons();
                }

                translate(key) {
                    const keys = key.split('.');
                    let value = i18nConfig.translations[this.currentLang];
                    
                    for (const k of keys) {
                        value = value?.[k];
                    }
                    
                    return value || key;
                }

                updateLanguage() {
                    document.querySelectorAll('[data-i18n]').forEach(element => {
                        const key = element.getAttribute('data-i18n');
                        const translation = this.translate(key);
                        
                        if (translation) {
                            if (element.tagName === 'INPUT' && element.type === 'text') {
                                element.placeholder = translation;
                            } else {
                                element.innerHTML = translation;
                            }
                        }
                    });

                    document.title = this.translate('title');
                    this.updateTimeline();
                    this.updateLanguageButtons();
                }

                updateTimeline() {
                    const timeline = document.getElementById('radio-timeline');
                    if (timeline) {
                        const timelineData = this.translate('radio.timeline');
                        if (Array.isArray(timelineData)) {
                            timeline.innerHTML = timelineData.map(item => `<li>${item}</li>`).join('');
                        }
                    }
                }

                updateLanguageButtons() {
                    document.querySelectorAll('[data-lang-btn]').forEach(btn => {
                        if (btn.getAttribute('data-lang-btn') === this.currentLang) {
                            btn.classList.add('active');
                        } else {
                            btn.classList.remove('active');
                        }
                    });
                }

                init() {
                    this.updateLanguage();
                }
            }

            let i18n;

            function setLanguage(lang) {
                i18n.setLanguage(lang);
            }

            function openRadioModal() {
                const modal = document.getElementById('radioModal');
                const content = document.getElementById('modalContent');
                
                const modalHTML = `
                    <h1>${i18n.translate('radio.modal.title')}</h1>
                    <p>${i18n.translate('radio.modal.content')}</p>
                    <h3>${i18n.translate('radio.modal.gettingStarted')}</h3>
                    <ol>
                        ${i18n.translate('radio.modal.steps').map(step => `<li>${step}</li>`).join('')}
                    </ol>
                    <h3>${i18n.translate('radio.modal.methods')}</h3>
                    <ul>
                        ${i18n.translate('radio.modal.methodsList').map(method => `<li>${method}</li>`).join('')}
                    </ul>
                `;
                
                content.innerHTML = modalHTML;
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }

            function closeRadioModal() {
                document.getElementById('radioModal').classList.add('hidden');
                document.body.style.overflow = 'auto';
            }

            // 初始化
            document.addEventListener('DOMContentLoaded', function() {
                i18n = new I18nManager();
                i18n.init();
                
                // 延迟加载每日一言
                setTimeout(() => {
                    fetch('https://v1.hitokoto.cn')
                        .then(response => response.json())
                        .then(data => {
                            const hitokoto = document.querySelector('#hitokoto_text');
                            if (hitokoto) {
                                hitokoto.innerText = data.hitokoto;
                            }
                        })
                        .catch(console.error);
                }, 1000);

                // ESC键关闭弹窗
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape') {
                        closeRadioModal();
                    }
                });

                // 点击弹窗外部关闭
                document.getElementById('radioModal').addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeRadioModal();
                    }
                });
            });
        </script>
    </body>
</html>